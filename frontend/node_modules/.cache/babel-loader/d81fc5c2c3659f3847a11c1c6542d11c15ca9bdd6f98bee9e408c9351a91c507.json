{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\leakr\\\\Desktop\\\\verwaltung\\\\frontend\\\\src\\\\App.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport jwtDecode from \"jwt-decode\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [token, setToken] = useState(null);\n  const [user, setUser] = useState(null);\n  const [modules, setModules] = useState([]);\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    if (token) {\n      const decoded = jwtDecode(token);\n      setUser({\n        username: decoded.sub\n      });\n      fetchModules(token);\n    }\n  }, [token]);\n  const fetchModules = async token => {\n    try {\n      console.log('Fetching modules with token:', token);\n      const response = await axios.get(\"http://localhost:3005/api/modules\", {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      console.log('Modules response:', response.data);\n      setModules(response.data.filter(m => m.enabled));\n    } catch (err) {\n      var _err$response, _err$response2, _err$response2$data;\n      console.error('Error fetching modules:', ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || err.message);\n      setError('Fehler beim Laden der Module: ' + (((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || err.message));\n    }\n  };\n  const handleLogin = async e => {\n    e.preventDefault();\n    setError(null);\n    console.log('Login attempt with:', {\n      username,\n      password\n    });\n    try {\n      const response = await axios.post(\"http://localhost:3005/api/auth/login\", {\n        username,\n        password\n      }, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      console.log('Login successful:', response.data);\n      setToken(response.data.token);\n      setUser({\n        username: response.data.user.username\n      });\n      fetchModules(response.data.token);\n    } catch (err) {\n      var _err$response3, _err$response4, _err$response4$data;\n      console.error('Login error:', ((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : _err$response3.data) || err.message);\n      setError('Login fehlgeschlagen: ' + (((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.message) || \"Ungültiger Benutzername oder Passwort\"));\n    }\n  };\n  if (!token) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleLogin,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Benutzername\",\n          value: username,\n          onChange: e => setUsername(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          placeholder: \"Passwort\",\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Anmelden\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: \"red\"\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 19\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"Willkommen, \", user === null || user === void 0 ? void 0 : user.username]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Freigeschaltete Module:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), modules.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: modules.map(mod => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: mod.name\n      }, mod.name, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Keine Module gefunden\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"ptlXTZWpDvG86XQZ8mErzFOFj78=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","axios","jwtDecode","jsxDEV","_jsxDEV","App","_s","token","setToken","user","setUser","modules","setModules","username","setUsername","password","setPassword","error","setError","decoded","sub","fetchModules","console","log","response","get","headers","Authorization","data","filter","m","enabled","err","_err$response","_err$response2","_err$response2$data","message","handleLogin","e","preventDefault","post","_err$response3","_err$response4","_err$response4$data","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","value","onChange","target","required","style","color","length","map","mod","name","_c","$RefreshReg$"],"sources":["C:/Users/leakr/Desktop/verwaltung/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport jwtDecode from \"jwt-decode\";\n\nfunction App() {\n  const [token, setToken] = useState(null);\n  const [user, setUser] = useState(null);\n  const [modules, setModules] = useState([]);\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (token) {\n      const decoded = jwtDecode(token);\n      setUser({ username: decoded.sub });\n      fetchModules(token);\n    }\n  }, [token]);\n\n  const fetchModules = async (token) => {\n    try {\n      console.log('Fetching modules with token:', token);\n      const response = await axios.get(\"http://localhost:3005/api/modules\", {\n        headers: { \n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      console.log('Modules response:', response.data);\n      setModules(response.data.filter((m) => m.enabled));\n    } catch (err) {\n      console.error('Error fetching modules:', err.response?.data || err.message);\n      setError('Fehler beim Laden der Module: ' + (err.response?.data?.message || err.message));\n    }\n  };\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    setError(null);\n    console.log('Login attempt with:', { username, password });\n    try {\n      const response = await axios.post(\n        \"http://localhost:3005/api/auth/login\",\n        { username, password },\n        {\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        }\n      );\n      console.log('Login successful:', response.data);\n      setToken(response.data.token);\n      setUser({ username: response.data.user.username });\n      fetchModules(response.data.token);\n    } catch (err) {\n      console.error('Login error:', err.response?.data || err.message);\n      setError('Login fehlgeschlagen: ' + (err.response?.data?.message || \"Ungültiger Benutzername oder Passwort\"));\n    }\n  };\n\n  if (!token) {\n    return (\n      <div>\n        <h2>Login</h2>\n        <form onSubmit={handleLogin}>\n          <input\n            type=\"text\"\n            placeholder=\"Benutzername\"\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n            required\n          />\n          <input\n            type=\"password\"\n            placeholder=\"Passwort\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            required\n          />\n          <button type=\"submit\">Anmelden</button>\n        </form>\n        {error && <p style={{ color: \"red\" }}>{error}</p>}\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      <h1>Willkommen, {user?.username}</h1>\n      <h3>Freigeschaltete Module:</h3>\n      {modules.length > 0 ? (\n        <ul>\n          {modules.map((mod) => (\n            <li key={mod.name}>{mod.name}</li>\n          ))}\n        </ul>\n      ) : (\n        <p>Keine Module gefunden</p>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}